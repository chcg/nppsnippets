<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
	<!ENTITY sect1_libraries SYSTEM "libraries.xml">
	<!ENTITY sect1_history SYSTEM "history.xml">
	<!ENTITY app_lic SYSTEM "gpl-2.0.xml">
	<!ENTITY app_tabdef SYSTEM "tabledef.xml">
]>

<article lang="en">

	<articleinfo>
		<title>NppSnippets, Snippets plug-in for Notepad++</title>
		<titleabbrev>NppSnippets</titleabbrev>
		<author><firstname>Frank</firstname><surname>Fesevur</surname></author>
		<pubdate>2013-06-27</pubdate>
	</articleinfo>

	<sect1 id="introduction">
		<title>Introduction</title>
		<para>NppSnippets is a plug-in for <ulink url="http://notepad-plus.sourceforge.net/">Notepad++</ulink>. It adds the possibility to add code snippets to the current document by selecting it from a simple list.</para>
	</sect1>

	<sect1 id="installation">
		<title>How to install or upgrade</title>
		<para>The easiest way to install this plugin is by using the Plugin Manager: from the "Plugins" menu, choose the "Plugin Manager" and "Show Plugin Manager". Select the "Snippets" plugin and choose "install" and follow the instructions on the screen.</para>
		<para>To manually install the plugin, copy <computeroutput>NppSnippets.dll</computeroutput> to the <computeroutput>plugins</computeroutput> directory and copy <computeroutput>Template.sqlite</computeroutput> to the <computeroutput>plugins/config</computeroutput> directory in the user's "Application Data" directory and name it <computeroutput>NppSnippets.sqlite</computeroutput>. On my Windows&nbsp;7 machine this directory is <computeroutput>C:\Users\Frank\AppData\Roaming\Notepad++\plugins\config</computeroutput>. Then (re)start Notepad++.</para>
		<para>You can place the database in the <computeroutput>plugins/config</computeroutput> directory in the Notepad++ installation directory typically in the "Program Files" directory, but this could result in a read-only database due to file permissions and/or User Account Control (UAC). Therefore it is advised to put it in your "Application Data" directory.</para>
		<para>You can also specify a custom path (like a shared network path or your Dropbox directory) for your database by manually editing the <computeroutput>NppSnippets.ini</computeroutput> file and adding a <computeroutput>DBFile</computeroutput> entry pointing to the full path name of the database. The <computeroutput>NppSnippets.ini</computeroutput> is in your "Application Data" directory.</para>
		<para>When you automatically upgrade through the Plugin Manager your database is not touched. If you are manually upgrading at least replace the existing dll. It is up to you if you override your own database with the template database provided in the archive. If you have not changed existing snippets or added your own, it is recommended to use the database in the archive.</para>
		<para>Note that this is a Unicode plug-in, so it doesn't work with an ANSI versions of Notepad++.</para>
	</sect1>

	<sect1 id="howtouse">
		<title>How to use</title>
		<para>To open the Snippets window, click on the "jigsaw" button on the toolbar, or via the menu "Plugins", "Snippets", "Snippets".</para>
		<para>The window consists of two parts. A combo-box where you can select the library and underneath it is the list of snippets in the chosen library. To insert a snippet simply double-click on the item in the list and the snippet is inserted at the current cursor position.</para>
		<para>When you switch to a document with another language the snippets for that new language are read from the database.</para>
	</sect1>

	<sect1 id="edit">
		<title>How to add or edit libraries or snippets</title>
		<para>To add or edit a snippet, right-click the snippet in the list and edit. To add or edit a library right-click the combo-box where you select the current library. You can also import a library from another database via this context menu.</para>
		<para>To add a lot of snippets, I suggest that you look at the section below that describes the database structure and import your data with you favorite SQLite management tool.</para>
	</sect1>

	<sect1 id="database">
		<title>Database</title>
		<para>NppSnippets uses a <ulink url="http://www.sqlite.org/">SQLite</ulink> database named <computeroutput>NppSnippets.sqlite</computeroutput> to store all the content.</para>
		<para>In the archive is a file named <computeroutput>NppSnippets.sql</computeroutput>. With this you can generate a new (almost empty) SQLite database. At least SQLite 3.6.19 is needed because a foreign key constrains are used and the plug-in will need this when editing the data through the GUI. So be sure not to create the database with an older SQLite management tool that breaks this.</para>
		<para>You should only update, insert or delete records and not modify the structure of the database. That can cause the plug-in (and as a result of that Notepad++ itself) to crash.</para>
		<para>The database structure is quite simple. There are four tables <computeroutput>Library</computeroutput>, <computeroutput>LibraryLang</computeroutput>, <computeroutput>Snippets</computeroutput> and <computeroutput>LangLastUsed</computeroutput>. There is a one-to-many relation between Library and LibraryLang, between Library and Snippets and between Library and LangLastUsed. They are all linked to each other with the LibraryID field. It is possible to have multiple libraries per language and one library can be used for many languages. For every library at least one record in the LibraryLang and Snippets tables is needed.</para>
		<para>There is a more detailed description of the fields in the tables in <xref linkend="tabledefs"/>. The current schema <computeroutput>user_version</computeroutput> of the database is&nbsp;3.</para>
	</sect1>

	<sect1 id="sqlite">
		<title>Why a SQLite database and not plain text files?</title>
		<para>All the snippets are stored in one <ulink url="http://www.sqlite.org/">SQLite</ulink> database. SQLite is fast and easy to use. With SQLite most of the file and storage handling is taken care of. This is much more efficient then designing my own (complex) file format and implementing a parser and a writer, although I understand that editing a SQLite database is not as easy to edit for some as editing plain text files. But there is a user interface for editing the snippets.</para>
	</sect1>

	&sect1_libraries;

	<sect1 id="userlibs">
		<title>User generated libraries</title>
		<para>From version 0.7 it is possible to import libraries from another NppSnippets database. This way redistributing user generated libraries becomes easy. If you have created your own library and think it can be useful for others, send it to me and I will put them on <ulink url="http://www.fesevur.com/nppsnippets">my website</ulink>.</para>
	</sect1>

	<sect1 id="faq">
		<title>Frequently Asked Questions</title>
		<qandaset>
			<qandaentry>
				<question id="faq_shortcutkeys"><para>
					Can I assign a shortcut key to a certain snippet?
				</para></question>
				<answer>
					<para>This is on the wish list, but I don't think it is possible. Shortcut key are assigned to menu items when the plug-ins are loaded. But individual snippets are not menu items. And shortcut keys need to be changeable on when you change the language the key assignments need to change on the fly. Consider Ctrl-B: this could be bold in HTML, but break in a c-styled languages and a begin/end block in Pascal.</para>
					<para>But a pointer to a way to implement this is any way, or even better a patch that fixes this is much appreciated.</para>
				</answer>
			</qandaentry>
		</qandaset>
	</sect1>

	<sect1 id="whislist">
		<title>Wish List</title>
		<itemizedlist>
			<listitem><para>Real template handling: variables in the snippets</para></listitem>
			<listitem><para>Select a text, right-click that selection and add as new snippet.</para></listitem>
			<listitem><para>If anyone can fix the MinGW compatible makefile, I can eliminate the need for the Visual C++ Redistributable Package and provide nightly builds.</para></listitem>
			<listitem><para>If possible, drag-and-drop from the list to the active document.</para></listitem>
			<listitem><para>Assign keyboard shortcut keys to a snippet.</para></listitem>
			<listitem><para>Remember the last select snippet from the list. Useful when switching between different languages.</para></listitem>
			<listitem><para>Add support for multiple selections.</para></listitem>
			<listitem><para>Easier sorting for non-alphabetic libraries. (move to top, move to bottom, dragging?)</para></listitem>
			<listitem><para>Export one or more library.</para></listitem>
			<listitem><para>Copy a certain snippet to another library.</para></listitem>
			<listitem><para>Properly indent the snippet when inserting.</para></listitem>
			<listitem><para>Options dialog to edit the location of the database.</para></listitem>
		</itemizedlist>
	</sect1>

	<sect1 id="knownissues">
		<title>Known Issues</title>
		<itemizedlist>
			<listitem><para>Closing the snippets window with the 'x' does not update toolbar icon and menu item. And as a result of that the state is not remembered properly. I need to find the notification that is send to the window on clicking the 'x'.</para></listitem>
			<listitem><para>When a library is not alphabetic sorted, and you move an item up or down, this is slow. This is because the "Sort"-field of all the snippets of that library need to be updated in the database.</para></listitem>
			<listitem><para>On Windows XP disabling context menu items like the "Move Up" and "Move Down" menu items is not visible. They don't turn gray but they are really disabled.</para></listitem>
			<listitem><para>The icon on the docking tab is inverted for some strange reason.</para></listitem>
			<listitem><para>When there is no write-access to the database, this is not properly handled.</para></listitem>
		</itemizedlist>
	</sect1>

	<sect1 id="license">
		<title>License</title>
		<para>This plug-in is published under the GPL-2 license. See <xref linkend="gpl"/> for the full license agreement. You can download the sources of the latest version from <ulink url="https://github.com/ffes/nppsnippets">https://github.com/ffes/nppsnippets</ulink>.</para>
	</sect1>

	<sect1 id="compile">
		<title>How to compile</title>
		<para>To compile NppSnippets you need Visual Studio. Project files for VS 2010 and VS 2013 are provided and actively used. To compile with other versions of Visual Studio you can convert an existing project file, but it is not tested.</para>
		<para>There is also a <ulink url="http://mingw-w64.sourceforge.net/">MinGW-w64</ulink> makefile, using their 32-bit compilers. It can be used from <ulink url="http://www.cygwin.com/">Cygwin</ulink> and MSys. The makefile compiles the sources and it generates a dll file, however at the moment that dll does not work. Pull requests are welcome! When you compile with MinGW, you need to create an empty file named <computeroutput>Makefile.deps</computeroutput>. Pull request to fix that are welcome as well.</para>
	</sect1>

	<sect1 id="contact">
		<title>Contact</title>
		<para>The project's web page can be found at <ulink url="http://www.fesevur.com/nppsnippets">http://www.fesevur.com/nppsnippets</ulink>. The downloads, issue tracker and git repository can be found at <ulink url="https://github.com/ffes/nppsnippets">https://github.com/ffes/nppsnippets</ulink>.</para>
		<para>If you have problems with, questions about or suggestions for NppSnippets you can contact me at <ulink url="mailto:fesevur@gmail.com">fesevur@gmail.com</ulink>.</para>
	</sect1>

	&sect1_history;
	&app_tabdef;
	&app_lic;

</article>
